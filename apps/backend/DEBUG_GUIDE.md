# Руководство по отладке проблем

## Проблема: Заказ не создается

### Проверка на бэкенде:

1. **Проверьте логи бэкенда** при создании заказа:
   - Должны быть логи: "Creating order with data: ..."
   - Должен быть лог: "Order created successfully: ..."
   - Если есть ошибка, будет детальный лог с stack trace

2. **Проверьте консоль браузера** (F12):
   - Должен быть лог: "Creating order with data: ..."
   - Если есть ошибка, будет детальная информация

3. **Проверьте Network вкладку** в DevTools:
   - Найдите запрос POST /api/orders
   - Проверьте Request payload - все ли поля отправляются
   - Проверьте Response - какая ошибка возвращается

### Возможные проблемы:

1. **Ошибка валидации Zod:**
   - Проверьте, что `serviceType` один из: "diagnostics", "repair", "maintenance", "other"
   - Если "other", должно быть поле `serviceTypeOther`

2. **Ошибка БД:**
   - Проверьте, что таблица `orders` существует
   - Проверьте, что все необходимые поля есть в таблице
   - Проверьте, что пользователь существует в БД

3. **Ошибка Prisma:**
   - Проверьте, что Prisma Client перегенерирован: `npm run db:generate`
   - Проверьте, что таблицы созданы в БД

## Проблема: Механик не видит назначенные заказы

1. **Проверьте логи:**
   - Должен быть лог: "Getting assigned orders for mechanic ..."
   - Должен быть лог: "Found X assigned orders for mechanic ..."

2. **Проверьте, что этапы назначены механику:**
   - В БД в таблице `order_stages` поле `assignedTo` должно содержать ID механика

3. **Проверьте роль пользователя:**
   - Пользователь должен иметь роль "mechanic"

## Проблема: Админ не может управлять шаблонами

1. **Проверьте роль:**
   - Пользователь должен иметь роль "admin"

2. **Проверьте логи:**
   - Должны быть детальные логи при создании/обновлении шаблонов

3. **Проверьте валидацию:**
   - Все обязательные поля должны быть заполнены

## Общие рекомендации:

1. **Всегда проверяйте логи бэкенда** - там детальная информация об ошибках
2. **Проверяйте консоль браузера** - там ошибки фронтенда
3. **Проверяйте Network вкладку** - там видно все запросы и ответы
4. **Проверяйте БД напрямую** - убедитесь, что данные сохраняются



